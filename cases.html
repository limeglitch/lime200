<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“„ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Ø§Ø³ØªÙŠØ±Ø§Ø¯ Firebase -->
    <script type="module">
        // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
        import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù€ Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDikvQqTbn8x2Yd2FiyzrMOVO7dO-r-3og",
            authDomain: "lime-4c195.firebaseapp.com",
            projectId: "lime-4c195",
            storageBucket: "lime-4c195.firebasestorage.app",
            messagingSenderId: "253428642396",
            appId: "1:253428642396:web:e0136755418eaf6534ac99",
            measurementId: "G-VV32PRPQGX"
        };

        // ØªÙ‡ÙŠØ¦Ø© Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener("DOMContentLoaded", async () => {
            const casesBody = document.getElementById("casesBody");
            casesBody.innerHTML = ""; // ØªÙØ±ÙŠØº Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

            // Ø¬Ù„Ø¨ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ù…Ù† Firestore
            const querySnapshot = await getDocs(collection(db, "cases"));
            
            if (querySnapshot.empty) {
                casesBody.innerHTML = "<tr><td colspan='5'>ğŸš« Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ø¶Ø§ÙŠØ§ Ù…Ø³Ø¬Ù„Ø©.</td></tr>";
                return;
            }

            querySnapshot.forEach((doc) => {
                const data = doc.data();
                const row = `
                    <tr>
                        <td>${data.caseNumber}</td>
                        <td>${data.clientName}</td>
                        <td>${data.courtName}</td>
                        <td>${data.lawyerName}</td>
                        <td>${data.caseStatus}</td>
                    </tr>
                `;
                casesBody.innerHTML += row;
            });
        });

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ù‚Ø¶ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
        window.addCase = async function () {
            const caseNumber = document.getElementById("caseNumber").value;
            const clientName = document.getElementById("clientName").value;
            const courtName = document.getElementById("courtName").value;
            const lawyerName = document.getElementById("lawyerName").value;
            const caseStatus = document.getElementById("caseStatus").value;

            if (!caseNumber || !clientName || !courtName || !lawyerName) {
                alert("âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©!");
                return;
            }

            try {
                await addDoc(collection(db, "cases"), {
                    caseNumber,
                    clientName,
                    courtName,
                    lawyerName,
                    caseStatus
                });

                alert("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø¶ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!");
                location.reload(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
            } catch (error) {
                console.error("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ©:", error);
            }
        };
    </script>
</head>
<body>

    <div class="header">
        <div class="office-name">ğŸ“Œ Ù…ÙƒØªØ¨ Ù…Ø­Ù…Ø¯ Ù…Ù†Ø·Ø§ÙˆÙŠ</div>
        <div class="developer">ğŸš€ ØªØ·ÙˆÙŠØ± Lime Glitch</div>
    </div>

    <div class="container">
        <h2>ğŸ“„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§</h2>

        <button onclick="document.getElementById('caseForm').style.display='block'">â• Ø¥Ø¶Ø§ÙØ© Ù‚Ø¶ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</button>
        <button onclick="window.location.href='old_cases.html'">ğŸ“‚ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©</button>

        <table class="cases-table">
            <thead>
                <tr>
                    <th>Ø±Ù‚Ù… Ø§Ù„Ù‚Ø¶ÙŠØ©</th>
                    <th>Ø§Ù„Ù…ÙˆÙƒÙ„</th>
                    <th>Ø§Ù„Ù…Ø­ÙƒÙ…Ø©</th>
                    <th>Ø§Ù„Ù…Ø­Ø§Ù…ÙŠ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</th>
                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                </tr>
            </thead>
            <tbody id="casesBody">
                <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ù‡Ù†Ø§ -->
            </tbody>
        </table>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¶ÙŠØ© -->
    <div id="caseForm" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>â• Ø¥Ø¶Ø§ÙØ© Ù‚Ø¶ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</h2>
            <input type="text" id="caseNumber" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‚Ø¶ÙŠØ©" required>
            <input type="text" id="clientName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙƒÙ„" required>
            <input type="text" id="courtName" placeholder="Ø§Ù„Ù…Ø­ÙƒÙ…Ø©" required>
            <input type="text" id="lawyerName" placeholder="Ø§Ù„Ù…Ø­Ø§Ù…ÙŠ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„" required>
            <select id="caseStatus">
                <option value="Ù…ØªØ¯Ø§ÙˆÙ„Ø©">Ù…ØªØ¯Ø§ÙˆÙ„Ø©</option>
                <option value="Ù…ØºÙ„Ù‚Ø©">Ù…ØºÙ„Ù‚Ø©</option>
                <option value="Ø¬Ù„Ø³Ø© Ù‚Ø§Ø¯Ù…Ø©">Ø¬Ù„Ø³Ø© Ù‚Ø§Ø¯Ù…Ø©</option>
            </select>
            <button onclick="addCase()">âœ… Ø­ÙØ¸ Ø§Ù„Ù‚Ø¶ÙŠØ©</button>
            <button onclick="document.getElementById('caseForm').style.display='none'">âŒ Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>

</body>
</html>
